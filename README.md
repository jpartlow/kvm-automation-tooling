# kvm-automation-tooling

This is currently just a collection of notes, scripts, templates and data files for experimenting with automating kvm vms for local development.

## Dependencies

These are the versions I was using when I built this module.

* Ruby 3.2+
* Puppet 8+
* Bolt 4+
* Terraform 1.10+
* [libvirt](https://libvirt.org/) 10.0.0
* libvirt-dev (for the ruby bindings using ruby-libvirt from the Gemfile)

## Usage

Note: libvirt-dev must be installed before the ruby-libvirt gem will build.

```
bundle install
bolt module install
```

Usage will be principally through Bolt plans from the plans dir.

## Tests

The modules must have been installed first via 'bolt module install' so that the symlinks in the spec modulepath under spec/fixtures/modules have something to anchor to and the specs can find the various manifests and their dependencies.

```
bolt rspec spec
```

TODO: sort out the Rakefile, which was generated by rspec-puppet and assumes it will control the spec/fixtures/module/kvm_automation_tooling symlink. Not sure if I want to go with the simple, but possibly perilous route of checking in the relative symlinks in spec/fixtures/modules or if I want to go with the more complex, but safer route of using a Rakefile to manage the symlinks.
